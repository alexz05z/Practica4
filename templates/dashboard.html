{% extends 'base.html' %}

{% block title %}Dashboard{% endblock %}

{% block content %}
<h2>Bienvenido, {{ nombre_admin }}</h2>
<p><strong>Tienda:</strong> {{ tienda }}</p>
<p><strong>Fecha:</strong> {{ fecha }}</p>

<hr>

<h3>Productos</h3>

<div>
    <ul>
        {% for producto in productos %}
    
        <li>Nombre: {{ producto.nombre }}</li>
        <li>Precio: {{ producto.precio }}</li>
        <li>Stock: 
            {% if producto.stock == 0 %}
                <span style="color: red;">Agotado</span>
            {% else %}
                {{ producto.stock }}
            {% endif %}
        </li>
        <li>Categoría: {{ producto.categoria }}</li>
    
        <br>
        
    
        {% endfor %}
    </ul>
    
    
    <p><strong>Total en stock:</strong> {{ total_stock }}</p>
</div>

<br>

<h3>Clientes</h3>

<div>
    <ul>
        {% for usuario in clientes %}
    
        <li>Nombre: {{ usuario.nombre }}</li>
        <li>Email: {{ usuario.email }}</li>
        <li>Fecha de Registro: {{ usuario.fecha_registro.strftime('%d/%m/%Y %H:%M') if usuario.fecha_registro else '—' }}</li>
        <li>N° de pedidos: {{ usuario.pedidos }}</li>
        <li>Actividad: {{usuario.activo}}</li>
        <li>Nº de pedidos: {{usuario.numero_pedidos}}</li>
    
        <br>
    
        {% endfor %}
    </ul>
</div>


<div>
    <p><strong>Clientes activos:</strong> {{ clientes_activos }}</p>
    <p><strong>Cliente con más pedidos:</strong> {{ cliente_pedido.nombre }} ({{ cliente_pedido.numero_pedidos }} pedidos)</p>
</div>

<br>

<h3>Pedidos recientes</h3>

<div>
    <ul>
        {% for pedido in pedidos %}
    
        <li>Cliente: {{ pedido.cliente }}</li>
        <li>Total: {{ pedido.total }}</li>
        <li>Fecha: {{ pedido.fecha }}</li>
    
        <br>
    
        {% endfor %}
    </ul>
    
    <p><strong>Total de ingresos:</strong> ${{ total }}</p>
</div>

{% endblock %}